<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Software Ontwikkeling: tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="placeholder.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Software Ontwikkeling
   &#160;<span id="projectnumber">0</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p>
<h1><a class="anchor" id="autotoc_md607"></a>
Tutorial</h1>
<p><b>Contents</b><br  />
 <a href="#getting-catch2">Getting Catch2</a><br  />
 <a href="#writing-tests">Writing tests</a><br  />
 <a href="#test-cases-and-sections">Test cases and sections</a><br  />
 <a href="#bdd-style-testing">BDD style testing</a><br  />
 <a href="#data-and-type-driven-tests">Data and Type driven tests</a><br  />
 <a href="#next-steps">Next steps</a><br  />
</p>
<h2><a class="anchor" id="autotoc_md608"></a>
Getting Catch2</h2>
<p>Ideally you should be using Catch2 through its <a href="cmake-integration.md#top">CMake integration</a>. Catch2 also provides pkg-config files and two file (header + cpp) distribution, but this documentation will assume you are using CMake. If you are using the two file distribution instead, remember to replace the included header with <code><a class="el" href="catch__amalgamated_8hpp.html">catch_amalgamated.hpp</a></code> (<a href="migrate-v2-to-v3.md#how-to-migrate-projects-from-v2-to-v3">step by step instructions</a>).</p>
<h2><a class="anchor" id="autotoc_md609"></a>
Writing tests</h2>
<p>Let's start with a really simple example (<a href="../examples/010-TestCase.cpp">code</a>). Say you have written a function to calculate factorials and now you want to test it (let's leave aside TDD for now).</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">unsigned int Factorial( unsigned int number ) {</div>
<div class="line">    return number &lt;= 1 ? number : Factorial(number-1)*number;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &lt;catch2/catch_test_macros.hpp&gt;</div>
<div class="line"> </div>
<div class="line">unsigned int Factorial( unsigned int number ) {</div>
<div class="line">    return number &lt;= 1 ? number : Factorial(number-1)*number;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST_CASE( &quot;Factorials are computed&quot;, &quot;[factorial]&quot; ) {</div>
<div class="line">    REQUIRE( Factorial(1) == 1 );</div>
<div class="line">    REQUIRE( Factorial(2) == 2 );</div>
<div class="line">    REQUIRE( Factorial(3) == 6 );</div>
<div class="line">    REQUIRE( Factorial(10) == 3628800 );</div>
<div class="line">}</div>
</div><!-- fragment --><p>This will compile to a complete executable which responds to <a href="command-line.md#top">command line arguments</a>. If you just run it with no arguments it will execute all test cases (in this case there is just one), report any failures, report a summary of how many tests passed and failed and return the number of failed tests (useful for if you just want a yes/ no answer to: "did it work").</p>
<p>Anyway, as the tests above as written will pass, but there is a bug. The problem is that <code>Factorial(0)</code> should return 1 (due to <a href="https://en.wikipedia.org/wiki/Factorial#Factorial_of_zero">its definition</a>). Let's add that as an assertion to the test case:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">TEST_CASE( &quot;Factorials are computed&quot;, &quot;[factorial]&quot; ) {</div>
<div class="line">    REQUIRE( Factorial(0) == 1 );</div>
<div class="line">    REQUIRE( Factorial(1) == 1 );</div>
<div class="line">    REQUIRE( Factorial(2) == 2 );</div>
<div class="line">    REQUIRE( Factorial(3) == 6 );</div>
<div class="line">    REQUIRE( Factorial(10) == 3628800 );</div>
<div class="line">}</div>
</div><!-- fragment --><p>After another compile &amp; run cycle, we will see a test failure. The output will look something like:</p>
<div class="fragment"><div class="line">Example.cpp:9: FAILED:</div>
<div class="line">  REQUIRE( Factorial(0) == 1 )</div>
<div class="line">with expansion:</div>
<div class="line">  0 == 1</div>
</div><!-- fragment --><p>Note that the output contains both the original expression, <code>REQUIRE( Factorial(0) == 1 )</code> and the actual value returned by the call to the <code>Factorial</code> function: <code>0</code>.</p>
<p>We can fix this bug by slightly modifying the <code>Factorial</code> function to: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">unsigned int Factorial( unsigned int number ) {</div>
<div class="line">  return number &gt; 1 ? Factorial(number-1)*number : 1;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md610"></a>
What did we do here?</h3>
<p>Although this was a simple test it's been enough to demonstrate a few things about how Catch2 is used. Let's take a moment to consider those before we move on.</p>
<ul>
<li>We introduce test cases with the <code>TEST_CASE</code> macro. This macro takes one or two string arguments - a free form test name and, optionally, one or more tags (for more see <a href="#test-cases-and-sections">Test cases and Sections</a>).</li>
<li>The test automatically self-registers with the test runner, and user does not have do anything more to ensure that it is picked up by the test framework. <em>Note that you can run specific test, or set of tests, through the <a href="command-line.md#top">command line</a>.</em></li>
<li>The individual test assertions are written using the <code>REQUIRE</code> macro. It accepts a boolean expression, and uses expression templates to internally decompose it, so that it can be individually stringified on test failure.</li>
</ul>
<p>On the last point, note that there are more testing macros available, because not all useful checks can be expressed as a simple boolean expression. As an example, checking that an expression throws an exception is done with the <code>REQUIRE_THROWS</code> macro. More on that later.</p>
<h2><a class="anchor" id="autotoc_md611"></a>
Test cases and sections</h2>
<p>Like most test frameworks, Catch2 supports a class-based fixture mechanism, where individual tests are methods on class and setup/teardown can be done in constructor/destructor of the type.</p>
<p>However, their use in Catch2 is rare, because idiomatic Catch2 tests instead use <em>sections</em> to share setup and teardown code between test code. This is best explained through an example (<a href="../examples/100-Fix-Section.cpp">code</a>):</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">TEST_CASE( &quot;vectors can be sized and resized&quot;, &quot;[vector]&quot; ) {</div>
<div class="line">    // This setup will be done 4 times in total, once for each section</div>
<div class="line">    std::vector&lt;int&gt; v( 5 );</div>
<div class="line"> </div>
<div class="line">    REQUIRE( v.size() == 5 );</div>
<div class="line">    REQUIRE( v.capacity() &gt;= 5 );</div>
<div class="line"> </div>
<div class="line">    SECTION( &quot;resizing bigger changes size and capacity&quot; ) {</div>
<div class="line">        v.resize( 10 );</div>
<div class="line"> </div>
<div class="line">        REQUIRE( v.size() == 10 );</div>
<div class="line">        REQUIRE( v.capacity() &gt;= 10 );</div>
<div class="line">    }</div>
<div class="line">    SECTION( &quot;resizing smaller changes size but not capacity&quot; ) {</div>
<div class="line">        v.resize( 0 );</div>
<div class="line"> </div>
<div class="line">        REQUIRE( v.size() == 0 );</div>
<div class="line">        REQUIRE( v.capacity() &gt;= 5 );</div>
<div class="line">    }</div>
<div class="line">    SECTION( &quot;reserving bigger changes capacity but not size&quot; ) {</div>
<div class="line">        v.reserve( 10 );</div>
<div class="line"> </div>
<div class="line">        REQUIRE( v.size() == 5 );</div>
<div class="line">        REQUIRE( v.capacity() &gt;= 10 );</div>
<div class="line">    }</div>
<div class="line">    SECTION( &quot;reserving smaller does not change size or capacity&quot; ) {</div>
<div class="line">        v.reserve( 0 );</div>
<div class="line"> </div>
<div class="line">        REQUIRE( v.size() == 5 );</div>
<div class="line">        REQUIRE( v.capacity() &gt;= 5 );</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>For each <code>SECTION</code> the <code>TEST_CASE</code> is <b>executed from the start</b>. This means that each section is entered with a freshly constructed vector <code>v</code>, that we know has size 5 and capacity at least 5, because the two assertions are also checked before the section is entered. This behaviour may not be ideal for tests where setup is expensive. Each run through a test case will execute one, and only one, leaf section.</p>
<p>Section can also be nested, in which case the parent section can be entered multiple times, once for each leaf section. Nested sections are most useful when you have multiple tests that share part of the set up. To continue on the vector example above, you could add a check that <code>std::vector::reserve</code> does not remove unused excess capacity, like this:</p>
<div class="fragment"><div class="line"><a class="code" href="catch__amalgamated_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a>( <span class="stringliteral">&quot;reserving bigger changes capacity but not size&quot;</span> ) {</div>
<div class="line">    <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.reserve( 10 );</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="catch__amalgamated_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.size() == 5 );</div>
<div class="line">    <a class="code" href="catch__amalgamated_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.capacity() &gt;= 10 );</div>
<div class="line">    <a class="code" href="catch__amalgamated_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a>( <span class="stringliteral">&quot;reserving down unused capacity does not change capacity&quot;</span> ) {</div>
<div class="line">        <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.reserve( 7 );</div>
<div class="line">        <a class="code" href="catch__amalgamated_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.size() == 5 );</div>
<div class="line">        <a class="code" href="catch__amalgamated_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( <a class="code" href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">v</a>.capacity() &gt;= 10 );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="acatch__amalgamated_8hpp_html_ad512fd95a78b95770b9759823f8fbc21"><div class="ttname"><a href="catch__amalgamated_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a></div><div class="ttdeci">#define SECTION(...)</div><div class="ttdef"><b>Definition:</b> catch_amalgamated.hpp:6261</div></div>
<div class="ttc" id="acatch__amalgamated_8hpp_html_ad57835ba8f1bb419a865ada6bd011a85"><div class="ttname"><a href="catch__amalgamated_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a></div><div class="ttdeci">#define REQUIRE(...)</div><div class="ttdef"><b>Definition:</b> catch_amalgamated.hpp:6240</div></div>
<div class="ttc" id="anamespacedevelopBuild_html_ade64cd34608f9442ef3049116a2da428"><div class="ttname"><a href="namespacedevelopBuild.html#ade64cd34608f9442ef3049116a2da428">developBuild.v</a></div><div class="ttdeci">v</div><div class="ttdef"><b>Definition:</b> developBuild.py:5</div></div>
</div><!-- fragment --><p>Another way to look at sections is that they are a way to define a tree of paths through the test. Each section represents a node, and the final tree is walked in depth-first manner, with each path only visiting only one leaf node.</p>
<p>There is no practical limit on nesting sections, as long as your compiler can handle them, but keep in mind that overly nested sections can become unreadable. From experience, having section nest more than 3 levels is usually very hard to follow and not worth the removed duplication.</p>
<h2><a class="anchor" id="autotoc_md612"></a>
BDD style testing</h2>
<p>Catch2 also provides some basic support for BDD-style testing. There are macro aliases for <code>TEST_CASE</code> and <code>SECTIONS</code> that you can use so that the resulting tests read as BDD spec. <code>SCENARIO</code> acts as a <code>TEST_CASE</code> with "Scenario: " name prefix. Then there are <code>GIVEN</code>, <code>WHEN</code>, <code>THEN</code> (and their variants with <code>AND_</code> prefix), which act as a <code>SECTION</code>, similarly prefixed with the macro name.</p>
<p>For more details on the macros look at the <a href="test-cases-and-sections.md#top">test cases and sections</a> part of the reference docs, or at the <a href="../examples/120-Bdd-ScenarioGivenWhenThen.cpp">vector example done with BDD macros</a>.</p>
<h2><a class="anchor" id="autotoc_md613"></a>
Data and Type driven tests</h2>
<p>Test cases in Catch2 can also be driven by types, input data, or both at the same time.</p>
<p>For more details look into the Catch2 reference, either at the <a href="test-cases-and-sections.md#type-parametrised-test-cases">type parametrized test cases</a>, or <a href="generators.md#top">data generators</a>.</p>
<h2><a class="anchor" id="autotoc_md614"></a>
Next steps</h2>
<p>This page is a brief introduction to get you up and running with Catch2, and to show the basic features of Catch2. The features mentioned here can get you quite far, but there are many more. However, you can read about these as you go, in the ever-growing <a href="Readme.md#top">reference section</a> of the documentation.</p>
<hr  />
<p><a href="Readme.md#top">Home</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
